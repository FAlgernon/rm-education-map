<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/rm-map.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.min.css">
    <script>
        function google_init(){
            
            //start app on google load
            console.log("gmap init");
            
        }
        
    </script>
    
<title>MMLIS RM Program Finder</title>
</head>
<body>
	<div id="map-container" data-ng-app="rm_data" data-ng-controller="data_ctrl">
		

		<div id="map-results-container" ng-repeat="event in eventData.events">
			<div class="map-results-each col-md-12">
                <div class="result-date col-md-2">
                    <input ng-model="event.date">
                </div>

				<div class="col-md-8">

                    
                    <select ng-model="event.id"> 
                     <option ng-repeat="topic in eventData.topics track by topic.id" value="{{topic.id}}">{{topic.title}}</option>
                    </select>
                    
                    
					<br>
                    {{getLocation(event.location)}}
				</div>

				<div class="col-md-2">
					<input ng-model="event.code">
					
				</div>


			</div>
		</div>
        
        <textarea ng-model="eventData | json"></textarea>
	</div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.0/js/bootstrap-select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js"></script>

    <script src="data/event-data.json"></script>

    <script>
        var app = angular.module('rm_data', []);
        app.controller('data_ctrl', function($scope) {
            //$http.get("http://www.w3schools.com/angular/customers.php")            .then(function (response) {$scope.names = response.data.records;});
            $scope.eventData = events;
            //console.log($scope);
            
            $scope.getTopic = function(rel){
                return $scope.eventData.topics[rel];
            }
            
            $scope.getCurrent = function(rel){
                return $index;
            }
            
            $scope.getTopics = function(){
                return $scope.eventData.topics;
            }
            
            $scope.getLocation = function(rel){
                return $scope.eventData.locations[rel].facility;
            }
            
            $scope.eventTopicMatch = function(rel){
                
                return $scope.getTopic[rel].concat($scope.getLocation(rel));
            }
        });
    </script>
    


    
</body>